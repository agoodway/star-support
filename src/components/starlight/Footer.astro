---
import DefaultFooter from '@astrojs/starlight/components/Footer.astro';
import FooterLinks from '../FooterLinks.astro';
import { Ad } from '../RightSidebar/ad';
---

<div class="hide-when-toc-is-visible">
	<Ad />
</div>
<DefaultFooter />
<FooterLinks />

<!-- Star Support Widget - Show on all pages -->
<star-support
	auth-key={import.meta.env.STAR_SUPPORT_AUTH_KEY || ''}
	theme="auto"
	position="bottom-right"
	welcome-message="Hi! How can I help you with Astro today?"
	bot-name="Astro AI"
	header-title="Astro Chat"></star-support>

<script>
	// Import the Star Support widget
	import '/widget/dist/star-support.js';
	
	// Debug logging
	console.log('[Star Support Debug] Footer script loaded');
	console.log('[Star Support Debug] Current page URL:', window.location.href);
	console.log('[Star Support Debug] Current origin:', window.location.origin);
	
	// Log when widget is ready
	customElements.whenDefined('star-support').then(() => {
		console.log('[Star Support Debug] Widget custom element defined');
		const widget = document.querySelector('star-support');
		if (widget) {
			console.log('[Star Support Debug] Widget found in DOM');
			console.log('[Star Support Debug] Widget HTML:', widget.outerHTML);
		}
	});
</script>

<style>
	@media (min-width: 72rem) {
		:global([data-has-toc]) .hide-when-toc-is-visible {
			display: none;
		}
	}
</style>
